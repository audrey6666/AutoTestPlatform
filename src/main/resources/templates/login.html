<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"></meta>
    <!-- /.website title -->
    <title>登 录</title>
    <!-- CSS Files -->
   <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"></link>
    <!-- Colors -->
    <link href="../assets/css/css-index.css" th:href="@{../assets/css/css-index.css}" rel="stylesheet" media="screen"></link>
    <link href="https://cdn.bootcss.com/bootstrap-validator/0.5.3/css/bootstrapValidator.css" rel="stylesheet"></link>
    <style>
        .has-error .checkbox, .has-error .checkbox-inline, .has-error .control-label, .has-error .help-block, .has-error .radio, .has-error .radio-inline, .has-error.checkbox label, .has-error.checkbox-inline label, .has-error.radio label, .has-error.radio-inline label {
            color: limegreen;
        }
    </style>
</head>

<body data-spy="scroll" data-target="#navbar-scroll">

<!-- /.preloader -->
<div id="preloader" style="background: #fff url(../assets/img/loading.GIF) no-repeat center center;">
	
</div>

<div id="top"></div>

<!-- /.parallax full screen background image -->
<div class="fullscreen landing parallax" style="background-image:url(../assets/img/bg.jpg) ;">

    <div class="overlay">
        <div class="container">
            <div class="row">
                <div class="col-md-7">

                    <!-- /.logo -->
                    <div class="logo wow fadeInDown"><a href=""><img src="../assets/img/logo.png"
                                                                     alt="logo"></img></a></div>

                    <!-- /.main title -->
                    <h1 class="wow fadeInLeft">
                        Auto Test Platform, Landing Page
                    </h1>

                    <!-- /.header paragraph -->
                    <div class="landing-text wow fadeInUp">
                        <p>Achieve the goal of API automation test, production environment monitoring, and API
                            performance test, with a concise and elegant manner.

                        </p>
                    </div>

                    <!-- /.header button -->
                   <!--  <div class="head-btn wow fadeInLeft">
                        <a href="https://github.com/HttpRunner/HttpRunnerManager" class="btn-default">Download</a>
                    </div> -->


                </div>

                <!-- /.signup form -->
                <div class="col-md-5">

                    <div class="signup-header wow fadeInUp">
                        <h3 class="form-title text-center">GET STARTED</h3>
                        <form class="form-header" action="" role="form" method="POST" id="login_form">
                            <div class="form-group">
                                <input class="form-control input-lg" name="account" id="account" type="text"
                                       placeholder="Your Account"></input>
                            </div>
                            <div class="form-group">
                                <input class="form-control input-lg" name="password" id="password" type="password"
                                       placeholder="Password"></input>
                            </div>
                            <div class="form-group last">
                                <input type="submit" id="login_submit" class="btn btn-warning btn-block btn-lg" value="Login" onclick="login()"></input>
                            </div>
                            <p style="font-size: medium" class="privacy text-center">Do not have account? Please <a
                                    href="/api/register_page" style="color: darkblue">Register</a>.</p>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- /.javascript files -->
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../assets/js/custom.js"></script>
<script src="../assets/js/jquery.sticky.js"></script>
<script src="../assets/js/wow.min.js"></script>
<script src="../assets/js/owl.carousel.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap-validator/0.5.3/js/bootstrapValidator.min.js"></script>

<script type="text/javascript">
    $(function () {
        $('form').bootstrapValidator({
            message: 'This value is not valid',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                account: {
                    message: '用户名验证失败',
                    validators: {
                        notEmpty: {
                            message: '用户名不能为空'
                        }
                    }
                },
                password: {
                    validators: {
                        notEmpty: {
                            message: '密码不能为空'
                        }
                    }
                }
            }
        });
    });
    
    
    function login() {
    	var account =$("#account").val();
        $.ajax({
        //几个参数需要注意一下
            type: "POST",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "/api/login" ,//url
            data: $('#login_form').serialize(),
            success: function (data) {
                console.log(data);//打印服务端返回的数据(调试用)
                if (data.code == 200) {
                	 window.location.href = "/api/index_page?account=" + account;
                }
            },
            error : function() {
            	window.location.href = "/api/login_page";
            }
        });
    }
</script>

</body>
</html>